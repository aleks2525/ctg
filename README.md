# –ö–¢–ì –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ò–¢–≠–õ–ú–ê

–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–∞—Ä–¥–∏–æ—Ç–æ–∫–æ–≥—Ä–∞–º–º—ã (–ö–¢–ì) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–æ–¥—É–ª–µ–π –∏ –ò–ò.

##  –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ö–¢–ì** - –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ —Ä–∞–Ω–µ–µ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –ö–¢–ì
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** - –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö –ö–¢–ì –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫
- **–≠–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑**:
  - –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ FIGO/NICE
  - –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ NICHD/ACOG
  - –£—á–µ—Ç —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —Ä–∏—Å–∫–∞ –∞–Ω–∞–º–Ω–µ–∑–∞
- **–ò–ò –º–æ–¥—É–ª—å** - –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 15, 30 –∏ 60+ –º–∏–Ω—É—Ç
- **–†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫**:
  - –ë–∞–∑–æ–≤—ã–π —Ä–∏—Ç–º (baseline FHR)
  - –í–∞—Ä–∏–∞–±–µ–ª—å–Ω–æ—Å—Ç—å
  - –ê–∫—Å–µ–ª–µ—Ä–∞—Ü–∏–∏ –∏ –¥–µ—Ü–µ–ª–µ—Ä–∞—Ü–∏–∏
  - –†–∏—Å–∫ –≥–∏–ø–æ–∫—Å–∏–∏
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –≤ HTML

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- pip

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞:
```bash
cd "D:\Moscow\ITELMA\New"
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–ø–∫–∏:
```bash
mkdir -p data/uploads
```

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä FastAPI:

```bash
python app.py
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: **http://localhost:8000**

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ app.py                      # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ api/                        # API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ schemas.py             # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ patients.py            # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–∞—Ü–∏–µ–Ω—Ç–∫–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ sessions.py            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ –ö–¢–ì
‚îÇ   ‚îú‚îÄ‚îÄ analysis.py            # –ê–Ω–∞–ª–∏–∑ –ö–¢–ì –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ reports.py             # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ database/                   # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ models.py              # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ
‚îú‚îÄ‚îÄ services/                   # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ database_service.py    # –°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ file_service.py        # –°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ analysis_service.py    # –°–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏–∑–∞ –ö–¢–ì
‚îÇ   ‚îî‚îÄ‚îÄ report_service.py      # –°–µ—Ä–≤–∏—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ ctg_analysis/               # –ú–æ–¥—É–ª–∏ –∞–Ω–∞–ª–∏–∑–∞ –ö–¢–ì
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ common.py              # –û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ figo_nice.py           # –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è FIGO/NICE
‚îÇ   ‚îú‚îÄ‚îÄ nichd_acog.py          # –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è NICHD/ACOG
‚îÇ   ‚îú‚îÄ‚îÄ variability.py         # –û—Ü–µ–Ω–∫–∞ –≤–∞—Ä–∏–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ hypoxia.py             # –†–∞—Å—á–µ—Ç —Ä–∏—Å–∫–∞ –≥–∏–ø–æ–∫—Å–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ ai_module.py           # –ò–ò –º–æ–¥—É–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ risk_adjustment.py     # –£—á–µ—Ç —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —Ä–∏—Å–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ static/                     # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.html             # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ styles.css             # –°—Ç–∏–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ logo.png               # –õ–æ–≥–æ—Ç–∏–ø
‚îÇ
‚îî‚îÄ‚îÄ data/                       # –î–∞–Ω–Ω—ã–µ
    ‚îî‚îÄ‚îÄ uploads/               # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ö–¢–ì
```

## üìä –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

CSV —Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–≤–∞ —Å—Ç–æ–ª–±—Ü–∞:
```csv
time_sec,value
0,120
1,122
2,121
...
```

- **FHR —Ñ–∞–π–ª**: –ß–°–° –ø–ª–æ–¥–∞ (—É–¥/–º–∏–Ω)
- **UC —Ñ–∞–π–ª**: –°–æ–∫—Ä–∞—â–µ–Ω–∏—è –º–∞—Ç–∫–∏ (–º–º —Ä—Ç. —Å—Ç.)

## üî¨ –ú–æ–¥—É–ª–∏ –∞–Ω–∞–ª–∏–∑–∞

### FIGO/NICE
–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π FIGO/NICE:
- **Normal** - –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è –ö–¢–ì
- **Suspicious** - –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ö–¢–ì
- **Pathological** - –ø–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ö–¢–ì

### NICHD/ACOG
–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π NICHD/ACOG:
- **Category I** - –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è –ö–¢–ì
- **Category II** - –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –ö–¢–ì
- **Category III** - –ø–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ö–¢–ì

### –§–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞
–£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã –∞–Ω–∞–º–Ω–µ–∑–∞:
- –°–∞—Ö–∞—Ä–Ω—ã–π –¥–∏–∞–±–µ—Ç (–≤–µ—Å: 2)
- –ê–Ω–µ–º–∏—è (–≤–µ—Å: 1)
- –•—Ä–æ–Ω–∏—á–µ—Å–∫–∞—è –≥–∏–ø–µ—Ä—Ç–æ–Ω–∏—è (–≤–µ—Å: 2)
- –ü—Ä–µ—ç–∫–ª–∞–º–ø—Å–∏—è (–≤–µ—Å: 3)
- –ò–Ω—Ñ–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è (–≤–µ—Å: 2)
- –ú–Ω–æ–≥–æ–ø–ª–æ–¥–Ω–∞—è –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å (–≤–µ—Å: 2)
- –ü–∞—Ç–æ–ª–æ–≥–∏–∏ –ø–ª–∞—Ü–µ–Ω—Ç—ã –∏ –ø—É–ø–æ–≤–∏–Ω—ã (–≤–µ—Å: 3)
- –ù–∞—Ä—É—à–µ–Ω–∏–µ —Å—Ä–æ–∫–∞ –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏ (–≤–µ—Å: 2)

–ü—Ä–∏ –±–∞–ª–ª–µ —Ä–∏—Å–∫–∞ ‚â• 4 –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–≤—ã—à–∞–µ—Ç—Å—è –Ω–∞ –æ–¥–Ω—É –∫–∞—Ç–µ–≥–æ—Ä–∏—é.

## üåê API Endpoints

### –ü–∞—Ü–∏–µ–Ω—Ç–∫–∏
- `POST /api/patients/` - —Å–æ–∑–¥–∞—Ç—å –ø–∞—Ü–∏–µ–Ω—Ç–∫—É
- `GET /api/patients/` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫
- `GET /api/patients/{id}` - –ø–æ–ª—É—á–∏—Ç—å –ø–∞—Ü–∏–µ–Ω—Ç–∫—É –ø–æ ID
- `PUT /api/patients/{id}` - –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–∞—Ü–∏–µ–Ω—Ç–∫–∏
- `DELETE /api/patients/{id}` - —É–¥–∞–ª–∏—Ç—å –ø–∞—Ü–∏–µ–Ω—Ç–∫—É
- `GET /api/patients/search/{query}` - –ø–æ–∏—Å–∫ –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫

### –°–µ—Å—Å–∏–∏ –ö–¢–ì
- `POST /api/sessions/` - —Å–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é
- `GET /api/sessions/patient/{patient_id}` - –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∫–∏
- `GET /api/sessions/{id}` - –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏—é –ø–æ ID
- `POST /api/sessions/{id}/upload-fhr` - –∑–∞–≥—Ä—É–∑–∏—Ç—å FHR —Ñ–∞–π–ª
- `POST /api/sessions/{id}/upload-uc` - –∑–∞–≥—Ä—É–∑–∏—Ç—å UC —Ñ–∞–π–ª
- `GET /api/sessions/{id}/data` - –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- `DELETE /api/sessions/{id}` - —É–¥–∞–ª–∏—Ç—å —Å–µ—Å—Å–∏—é

### –ê–Ω–∞–ª–∏–∑
- `POST /api/analysis/{session_id}/analyze` - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –ö–¢–ì
- `GET /api/analysis/{session_id}/statistics` - –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –û—Ç—á–µ—Ç—ã
- `POST /api/reports/` - —Å–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç
- `GET /api/reports/session/{session_id}` - –ø–æ–ª—É—á–∏—Ç—å –æ—Ç—á–µ—Ç –ø–æ —Å–µ—Å—Å–∏–∏
- `GET /api/reports/patient/{patient_id}` - –ø–æ–ª—É—á–∏—Ç—å –æ—Ç—á–µ—Ç—ã –ø–∞—Ü–∏–µ–Ω—Ç–∫–∏
- `GET /api/reports/{id}/download` - —Å–∫–∞—á–∞—Ç—å –æ—Ç—á–µ—Ç –≤ HTML

## üìù –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑ –ö–¢–ì

```python
import requests

# 1. –°–æ–∑–¥–∞—Ç—å –ø–∞—Ü–∏–µ–Ω—Ç–∫—É
patient_data = {
    "full_name": "–ò–≤–∞–Ω–æ–≤–∞ –ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–Ω–∞",
    "diagnosis": "–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å 38 –Ω–µ–¥–µ–ª—å",
    "diabetes": False,
    "preeclampsia": True,
    "term": False
}
response = requests.post("http://localhost:8000/api/patients/", json=patient_data)
patient = response.json()

# 2. –°–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é
session_data = {"patient_id": patient["id"]}
response = requests.post("http://localhost:8000/api/sessions/", json=session_data)
session = response.json()

# 3. –ó–∞–≥—Ä—É–∑–∏—Ç—å FHR —Ñ–∞–π–ª
with open("fhr_data.csv", "rb") as f:
    files = {"file": f}
    response = requests.post(
        f"http://localhost:8000/api/sessions/{session['id']}/upload-fhr",
        files=files
    )

# 4. –ó–∞–≥—Ä—É–∑–∏—Ç—å UC —Ñ–∞–π–ª
with open("uc_data.csv", "rb") as f:
    files = {"file": f}
    response = requests.post(
        f"http://localhost:8000/api/sessions/{session['id']}/upload-uc",
        files=files
    )

# 5. –í—ã–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑
analysis_params = {
    "figo_nice": True,
    "nichd_acog": True,
    "ai": True
}
response = requests.post(
    f"http://localhost:8000/api/analysis/{session['id']}/analyze",
    json=analysis_params
)
results = response.json()

print(f"–ë–∞–∑–æ–≤—ã–π —Ä–∏—Ç–º: {results['fhr_base']} —É–¥/–º–∏–Ω")
print(f"–°—Ç–∞—Ç—É—Å: {results['status']}")
print(f"FIGO/NICE: {results['figo_result']['label']}")
print(f"NICHD/ACOG: {results['nichd_result']['label']}")
```

## –û—Ç–ª–∞–¥–∫–∞

–õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –±—É–¥—É—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å. –î–ª—è –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
uvicorn app:app --reload --log-level debug
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

¬© 2025 ITELMA. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.

## üë• –ê–≤—Ç–æ—Ä—ã

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è ITELMA

